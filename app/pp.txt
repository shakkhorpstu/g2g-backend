Plan: PSW Availability feature

Goal
- Allow PSWs to configure: minimum booking slot duration, which weekdays they are available, and multiple time slots per day (start/end and slot duration).

Scope
- Migrations (idempotent) to add necessary columns and tables
- Models to represent availability days and slots
- Repository/service surface for listing and syncing availability
- API endpoints for PSWs to read/update availability

Database migrations (already created)
1) Add min booking slot to `psw_profiles`
   - Table: `psw_profiles`
   - Column: `min_booking_slot` unsignedSmallInteger, default 30 (minutes)
   - Index: `min_booking_slot`
   - Rationale: quick per-PSW lookup for UI and scheduling logic

2) Create `psw_availability_days`
   - Columns:
     - `id` (bigIncrements)
     - `psw_profile_id` (unsignedBigInteger, indexed, FK to psw_profiles with cascade)
     - `day_of_week` (unsignedTinyInteger) // 0=Sunday..6=Saturday
     - `is_available` (boolean default false)
     - timestamps
   - Unique index: (`psw_profile_id`, `day_of_week`) to enforce one row per day per profile
   - Rationale: quick toggle per weekday, used by UI to show which days are enabled

3) Create `psw_availability_slots`
   - Columns:
     - `id` (bigIncrements)
     - `psw_profile_id` (unsignedBigInteger, indexed, FK)
     - `availability_day_id` (unsignedBigInteger, indexed, FK to psw_availability_days)
     - `start_time` (time)
     - `end_time` (time)
     - `slot_duration_minutes` (unsignedSmallInteger default 30)
     - `is_active` (boolean default true)
     - timestamps
   - Unique index: (`availability_day_id`, `start_time`, `end_time`) to avoid duplicate ranges
   - Index: composite (`psw_profile_id`, `availability_day_id`) for fast queries
   - Rationale: Allows multiple availability ranges per day, each with its own slot duration

Model design
- `PswAvailabilityDay` (model name suggestion)
  - BelongsTo: `PswProfile`
  - HasMany: `PswAvailabilitySlot`
  - Attributes: `day_of_week`, `is_available`

- `PswAvailabilitySlot`
  - BelongsTo: `PswProfile`
  - BelongsTo: `PswAvailabilityDay`
  - Attributes: `start_time`, `end_time`, `slot_duration_minutes`, `is_active`

Repository & Service patterns
- Repository methods (DB queries):
  - getDaysByPswProfile(int $profileId): array
  - getSlotsByPswProfile(int $profileId): array
  - syncAvailability(int $profileId, array $daysPayload, array $slotsPayload): array

- Service methods:
  - listForAuthenticatedPsw(): return days + slots + min_booking_slot
  - syncForAuthenticatedPsw(array payload): create/update/delete days & slots in a transaction; return updated availability

API surface (PSW guarded)
- GET  /v1/psw/profile/availability
  - Returns: { min_booking_slot, days: [{day_of_week,is_available}], slots: [{id, day_of_week, start_time, end_time, slot_duration_minutes, is_active}] }

- PUT /v1/psw/profile/availability
  - Body: { min_booking_slot?: int, days?: [{day_of_week:int,is_available:bool}], slots?: [{id?:int, day_of_week:int, start_time:'HH:MM', end_time:'HH:MM', slot_duration_minutes?:int, is_active?:bool}] }
  - Behavior: update `min_booking_slot` if provided; upsert days by day_of_week; sync slots for each day (create/update/delete) — entire operation transactional

Validation rules (SyncRequest)
- `min_booking_slot`: integer, in set [15,30,45,60] (or any supported; define config)
- `days`.*.day_of_week: integer 0..6
- `days`.*.is_available: boolean
- `slots`.*.day_of_week: integer 0..6
- `slots`.*.start_time/end_time: required, format H:i
- `slots`.*.slot_duration_minutes: integer >0
- Business rule: `end_time` > `start_time`; slot durations must divide the range optionally (or validated client-side)

Edge cases & considerations
- Time zones: store times as local times in PSW profile's preferred timezone or UTC offset — decide on timezone handling before implementing scheduling engine.
- Overlapping slots: enforce via validation to prevent overlaps for the same availability_day_id.
- Default seed: optionally seed `psw_availability_days` for new profiles with 7 rows defaulting to is_available=false.
- Deletion strategy: when syncing, use unique keys and delete any slots not present in payload (or return instructions to client).

Indexes & performance
- Indexes added for fast lookups by `psw_profile_id` and `availability_day_id`
- Querying availability for matching PSWs in search scenarios will still require joining to `psw_profiles` (or denormalize if necessary later)

Backwards compatibility & migrations
- All migrations should be idempotent (Schema::hasTable / hasColumn checks included)
- If your existing `psw_profiles` table uses different column names, adapt the migration accordingly

Next steps I can implement for you
- Add Eloquent models for `PswAvailabilityDay` and `PswAvailabilitySlot` and wire relations on `PswProfile`
- Add repository & service classes with DB-based sync code
- Add controller endpoints and FormRequest (SyncPswAvailabilityRequest)
- Add frontend-friendly response transformation

If you want me to apply this now, say which parts to create first:
- (A) Migrations + Models only
- (B) Migrations + Models + Repository + Service
- (C) Full feature: add Controller, Request validation, and routes as well

Notes:
- I already created idempotent migration files in the repo for these tables. If you choose (A) I will add model files next; (B)/(C) I will continue implementing the repositories, services and endpoints using the project's patterns.
